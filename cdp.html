<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>STUDENT WALA â€” CDP Quiz</title>
  <style>
    :root{
      --blue:#007bff; --blue-dark:#0056b3; --green:#28a745; --red:#dc3545;
      --page-bg:#f4f7fc; --card-bg:#fff; --muted:#6b7280;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,Arial,sans-serif;background:var(--page-bg);color:#111}
    header{background:var(--blue);color:#fff;padding:16px 12px;text-align:center;font-size:20px;font-weight:700}
    .wrap{max-width:980px;margin:20px auto;padding:12px}
    .start-card, .card, .summary{background:var(--card-bg);border-radius:12px;padding:18px;margin-bottom:18px;box-shadow:0 6px 18px rgba(15,23,42,0.06)}
    .input-row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    input[type="number"]{padding:10px;border-radius:8px;border:1px solid #ddd;width:140px}
    button.primary{background:var(--blue);color:#fff;padding:10px 16px;border-radius:8px;border:none;cursor:pointer;font-weight:700}
    button.ghost{background:transparent;border:1px solid #ddd;padding:8px 12px;border-radius:8px;cursor:pointer}
    .q-title{color:var(--blue);font-weight:700;margin-bottom:12px}
    .options{display:flex;flex-direction:column;gap:10px}
    .opt-btn{display:flex;align-items:center;gap:12px;border-radius:10px;padding:10px 12px;border:1px solid rgba(15,23,42,0.06);background:#fff;cursor:pointer;font-weight:700}
    .opt-btn.disabled{opacity:.6;cursor:not-allowed}
    .opt-label{flex:0 0 36px;color:var(--blue);font-weight:900}
    .opt-text{flex:1;text-align:left}
    .icon{width:26px;height:26px;border-radius:6px;display:inline-grid;place-items:center;color:#fff;font-weight:900}
    .ok{background:var(--green)}
    .bad{background:var(--red)}
    .result-line{margin-top:12px;font-weight:700}
    .result-correct{color:var(--green)}
    .result-wrong{color:var(--red)}
    .controls{display:flex;gap:8px;margin-top:14px;flex-wrap:wrap}
    .meta{display:flex;gap:12px;flex-wrap:wrap;font-size:14px;color:var(--muted);margin-top:8px}
    .summary-list{margin-top:10px}
    @media(max-width:640px){
      input[type="number"]{width:100%}
      .input-row{flex-direction:column;align-items:stretch}
    }
  </style>
</head>
<body>
  <header>ðŸ“˜ STUDENT WALA â€” Child Development & Pedagogy (CDP) Quiz</header>

  <div class="wrap">

    <!-- START CARD -->
    <div class="start-card" id="startCard">
      <h2 style="margin:0 0 8px 0;color:var(--blue)">Start CDP Quiz</h2>
      <p style="margin:0 0 12px 0;color:var(--muted)">
        Type number of questions you want to attempt (e.g. 10, 20, 50, 100 or 1000) and click Start.
      </p>
      <div class="input-row">
        <input id="numInput" type="number" min="1" max="1000" placeholder="Enter number (1 - 1000)" />
        <button class="primary" id="startBtn">Start Test</button>
        <button class="ghost" id="demoBtn">Try demo (10)</button>
      </div>
      <div class="meta">
        <div><strong>Pool:</strong> 1000 generated CDP-style Qs</div>
        <div><strong>Mode:</strong> Instant feedback per question</div>
      </div>
    </div>

    <!-- QUIZ CARD -->
    <div class="card" id="quizCard" style="display:none;">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:8px;flex-wrap:wrap">
        <div>
          <div class="q-title" id="qTitle">Question</div>
          <div id="qCounter" style="font-weight:700;color:var(--muted)"></div>
        </div>
        <div style="text-align:right">
          <div style="font-size:13px;color:var(--muted)">Correct: <span id="correctCount">0</span>  Wrong: <span id="wrongCount">0</span></div>
          <div style="margin-top:6px"><button class="ghost" id="endBtn">End Test</button></div>
        </div>
      </div>

      <div class="options" id="options"></div>

      <div class="result-line" id="resultLine" style="display:none"></div>

      <div class="controls">
        <button class="ghost" id="prevBtn">Previous</button>
        <button class="ghost" id="nextBtn">Next</button>
      </div>
    </div>

    <!-- SUMMARY -->
    <div id="summaryCard" class="summary" style="display:none;">
      <h3 style="margin-top:0;color:var(--blue)">Test Summary</h3>
      <div id="summaryStats"></div>
      <div id="wrongList" class="summary-list"></div>
      <div style="margin-top:12px">
        <button class="primary" id="restartBtn">Restart</button>
      </div>
    </div>

  </div>

<script>
/*
  cdp.html
  - Programmatically generates 1000 CDP-style questions using templates
  - Allows user to input how many questions to attempt
  - Provides instant feedback, marks correct/incorrect, shows summary
*/

// ----- Question generation templates -----
// Each template: [questionTextTemplate, [optA,optB,optC,optD], correctIndex(0-3)]
const templates = [
  ["Which factor primarily influences physical growth in children?", ["Genetics","Nutrition","Homework","Television"], 1],
  ["Growth refers to:", ["Change in body size","Change in mood only","Social adjustment only","Emotional feeling"], 0],
  ["Piaget's concrete operational stage is typically at age:", ["7-11 years","0-2 years","12-18 years","3-6 years"], 0],
  ["Vygotsky emphasized the role of ___ in development.", ["Social interaction","Diet","Genetics only","Television"], 0],
  ["Constructivist pedagogy emphasizes:", ["Active learning","Teacher lecture only","Memorization","Punishment"], 0],
  ["Scaffolding in teaching means:", ["Providing support to learners","Giving no help","Increasing homework","Strict grading"], 0],
  ["Assessment purpose is to:", ["Improve learning","Rank students only","Punish slow learners","Increase workload"], 0],
  ["Play-based learning benefits children by:", ["Enhancing creativity","Reducing sleep","Increasing headaches","Reducing reading"], 0],
  ["Attachment theory was proposed by:", ["John Bowlby","Skinner","Piaget","Vygotsky"], 0],
  ["Inclusive education aims to:", ["Include diverse learners","Separate all students","Only teach gifted","Ignore special needs"], 0],
  ["Formative assessment helps to:", ["Improve ongoing learning","Finalize grades only","Punish learners","Increase teacher workload"], 0],
  ["Language development milestone: babbling typically occurs at:", ["6-9 months","5 years","2 years","10 years"], 0],
  ["Metacognition refers to:", ["Thinking about thinking","Simple counting","Only memorization","Physical growth"], 0],
  ["Executive functions include:", ["Memory and planning","Only sport skills","Only singing","Telepathy"], 0],
  ["Empathy helps children to:", ["Understand others' feelings","Run faster","Cook food","Increase weight"], 0],
  ["Summative assessment is used for:", ["Evaluating at end of unit","Daily feedback only","Hiding results","Punishment"], 0],
  ["IEP stands for:", ["Individualized Education Program","International Education Plan","Important Exam Paper","Internal Exam Policy"], 0],
  ["Role play helps in:", ["Social and language development","Only weight gain","Eye color change","Growing taller"], 0],
  ["Positive reinforcement means:", ["Rewarding desired behavior","Punishing all mistakes","Ignoring students","Removing books"], 0],
  ["Effective lesson planning requires:", ["Learning objectives","No plan","Only copying","Only exams"], 0]
];

// Generate 1000 questions by varying templates slightly
function generateQuestions(total=1000){
  const questions = [];
  // We'll rotate through templates and slightly vary wording or options
  for(let i=0;i<total;i++){
    const t = templates[i % templates.length];
    // clone options and optionally shuffle minorly
    const opts = t[1].slice();
    // small variation: sometimes swap two options to add variety
    if(Math.random() < 0.18){
      const a = Math.floor(Math.random()*4), b = Math.floor(Math.random()*4);
      const tmp = opts[a]; opts[a]=opts[b]; opts[b]=tmp;
    }
    // find correct index (index of original correct text in opts array)
    const correctText = t[1][t[2]];
    let correctIndex = opts.indexOf(correctText);
    if(correctIndex === -1) correctIndex = 0;
    // Build question text with number label
    const qtext = (i+1) + ". " + t[0];
    questions.push({
      id: i+1,
      text: qtext,
      choices: [
        {key:"A", text: opts[0]},
        {key:"B", text: opts[1]},
        {key:"C", text: opts[2]},
        {key:"D", text: opts[3]}
      ],
      answerKey: ["A","B","C","D"][correctIndex]
    });
  }
  return questions;
}

// Create full pool
const POOL = generateQuestions(1000);

// ----- Quiz runtime state -----
let selectedSet = []; // array of question objects for current test
let currentIndex = 0;
let correctCount = 0;
let wrongCount = 0;
const wrongDetails = []; // {id, question, selected, correct}

// UI elements
const startCard = document.getElementById("startCard");
const quizCard = document.getElementById("quizCard");
const summaryCard = document.getElementById("summaryCard");
const numInput = document.getElementById("numInput");
const startBtn = document.getElementById("startBtn");
const demoBtn = document.getElementById("demoBtn");
const qTitle = document.getElementById("qTitle");
const qCounter = document.getElementById("qCounter");
const optionsDiv = document.getElementById("options");
const resultLine = document.getElementById("resultLine");
const correctCountEl = document.getElementById("correctCount");
const wrongCountEl = document.getElementById("wrongCount");
const endBtn = document.getElementById("endBtn");
const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");
const summaryStats = document.getElementById("summaryStats");
const wrongList = document.getElementById("wrongList");
const restartBtn = document.getElementById("restartBtn");

// ----- Helpers -----
function pickRandomQuestions(n){
  const poolCopy = POOL.slice();
  const picked = [];
  for(let i=0;i<n && poolCopy.length>0;i++){
    const idx = Math.floor(Math.random()*poolCopy.length);
    picked.push(poolCopy.splice(idx,1)[0]);
  }
  return picked;
}

function resetState(){
  selectedSet = []; currentIndex = 0; correctCount=0; wrongCount=0; wrongDetails.length=0;
  correctCountEl.textContent = "0"; wrongCountEl.textContent = "0";
  resultLine.style.display = "none";
}

function startTest(n){
  n = Number(n) || 10;
  if(n < 1) n = 1;
  if(n > POOL.length) n = POOL.length;
  resetState();
  selectedSet = pickRandomQuestions(n);
  startCard.style.display = "none";
  summaryCard.style.display = "none";
  quizCard.style.display = "block";
  renderQuestion(0);
}

function renderQuestion(index){
  const q = selectedSet[index];
  currentIndex = index;
  qTitle.textContent = q.text;
  qCounter.textContent = `Question ${index+1} of ${selectedSet.length}`;
  optionsDiv.innerHTML = "";
  resultLine.style.display = "none";

  q._answered = q._answered || false; // track if already answered
  q.choices.forEach(choice=>{
    const btn = document.createElement("button");
    btn.className = "opt-btn" + (q._answered ? " disabled" : "");
    btn.type = "button";
    btn.dataset.key = choice.key;

    const label = document.createElement("div");
    label.className = "opt-label"; label.textContent = choice.key;

    const txt = document.createElement("div");
    txt.className = "opt-text"; txt.textContent = choice.text;

    btn.appendChild(label); btn.appendChild(txt);

    btn.addEventListener("click", ()=> handleAnswer(q, choice.key, btn));

    optionsDiv.appendChild(btn);

    // If already answered earlier, show markers
    if(q._answered){
      markAnsweredUI(q, btn);
    }
  });

  // Update nav buttons
  prevBtn.disabled = (index === 0);
  nextBtn.disabled = (index === selectedSet.length-1);
}

function handleAnswer(question, selectedKey, clickedBtn){
  if(question._answered) return; // already answered
  // mark answered
  question._answered = true;

  // disable all option buttons UI immediately
  const allBtns = optionsDiv.querySelectorAll(".opt-btn");
  allBtns.forEach(b => { b.classList.add("disabled"); b.disabled = true; });

  // find correct btn reference for marking
  let correctBtn = null;
  allBtns.forEach(b => { if(b.dataset.key === question.answerKey) correctBtn = b; });

  if(selectedKey === question.answerKey){
    // Correct
    correctCount++;
    correctCountEl.textContent = String(correctCount);
    // mark clicked
    const icon = document.createElement("div"); icon.className = "icon ok"; icon.textContent = "âœ“";
    clickedBtn.insertBefore(icon, clickedBtn.firstChild);
    clickedBtn.style.backgroundColor = "#eafaf0";
    clickedBtn.style.borderColor = "rgba(40,167,69,0.6)";
    resultLine.style.display = "block";
    resultLine.textContent = "Correct!";
    resultLine.className = "result-line result-correct";
  } else {
    // Wrong
    wrongCount++;
    wrongCountEl.textContent = String(wrongCount);
    const iconBad = document.createElement("div"); iconBad.className = "icon bad"; iconBad.textContent = "âœ•";
    clickedBtn.insertBefore(iconBad, clickedBtn.firstChild);
    clickedBtn.style.backgroundColor = "#fff0f0";
    clickedBtn.style.borderColor = "rgba(220,53,69,0.6)";

    // mark correct option
    if(correctBtn){
      const iconOk = document.createElement("div"); iconOk.className = "icon ok"; iconOk.textContent = "âœ“";
      correctBtn.insertBefore(iconOk, correctBtn.firstChild);
      correctBtn.style.backgroundColor = "#eafaf0";
      correctBtn.style.borderColor = "rgba(40,167,69,0.6)";
    }

    resultLine.style.display = "block";
    // find texts
    const correctText = question.choices.find(c => c.key === question.answerKey).text;
    const selectedText = question.choices.find(c => c.key === selectedKey).text;
    resultLine.textContent = `Wrong â€” correct answer: ${question.answerKey}) ${correctText}`;
    resultLine.className = "result-line result-wrong";

    // store wrong detail
    wrongDetails.push({
      id: question.id,
      qIndex: currentIndex+1,
      question: question.text,
      selected: selectedKey,
      selectedText,
      correct: question.answerKey,
      correctText
    });
  }

  // update summary preview (live)
  updateSummaryPreview();
}

function markAnsweredUI(question, btn){
  // show icons for options according to question._selected (not used here)
  // (kept for future restoration)
}

function updateSummaryPreview(){
  // live small stats already updated via counters
}

function endTest(){
  quizCard.style.display = "none";
  // show summary
  summaryCard.style.display = "block";
  summaryStats.innerHTML = `
    <div><strong>Total Attempted:</strong> ${selectedSet.length}</div>
    <div><strong>Correct:</strong> <span style="color:var(--green);font-weight:700">${correctCount}</span></div>
    <div><strong>Wrong:</strong> <span style="color:var(--red);font-weight:700">${wrongCount}</span></div>
  `;
  // wrong list
  if(wrongDetails.length === 0){
    wrongList.innerHTML = `<div style="color:var(--green);font-weight:700;margin-top:8px">All answers correct âœ…</div>`;
  } else {
    let html = `<div style="margin-top:8px"><strong>Wrong Questions:</strong></div><ol style="margin-left:18px">`;
    wrongDetails.forEach(w=>{
      html += `<li style="margin:6px 0"><div style="font-weight:700">${w.question}</div>
        <div style="color:var(--red)">Selected (${w.selected}) â€” ${w.selectedText}</div>
        <div style="color:var(--green)">Correct (${w.correct}) â€” ${w.correctText}</div></li>`;
    });
    html += `</ol>`;
    wrongList.innerHTML = html;
  }
}

// ----- Event bindings -----
startBtn.addEventListener("click", ()=>{
  const n = Number(numInput.value) || 0;
  if(!n || n < 1){ alert("Please enter a number between 1 and 1000"); return; }
  startTest(n);
});
demoBtn.addEventListener("click", ()=> startTest(10));
endBtn.addEventListener("click", ()=> {
  if(confirm("End test and view summary?")) endTest();
});
prevBtn.addEventListener("click", ()=> {
  if(currentIndex > 0) renderQuestion(currentIndex-1);
});
nextBtn.addEventListener("click", ()=> {
  if(currentIndex < selectedSet.length-1) renderQuestion(currentIndex+1);
});
restartBtn.addEventListener("click", ()=>{
  summaryCard.style.display="none"; startCard.style.display="block";
});

// Optional: keyboard support (A/B/C/D)
document.addEventListener("keydown", (e)=>{
  if(quizCard.style.display === "block"){
    const key = e.key.toUpperCase();
    if(["A","B","C","D"].includes(key)){
      // find visible button with that key and click if not disabled
      const btn = Array.from(document.querySelectorAll(".opt-btn")).find(b=>b.dataset.key===key && !b.disabled);
      if(btn) btn.click();
    }
    if(e.key === "ArrowRight") nextBtn.click();
    if(e.key === "ArrowLeft") prevBtn.click();
  }
});
</script>
</body>
</html>
